{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-function.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const divEl = document.querySelector('.card-container');\nexport  function renderPhoto(arrayHits) {\n    // divEl.innerHTML = '';\n    const markup = arrayHits.hits.reduce((value, hit) => {\n        const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = hit;\n        return value += `<div class=\"container-img\">\n      <a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\"></a>\n      <ul class=\"img_list\">\n        <li class=\"img_item\">\n          <h3 class=\"img_title\">Likes</h3>\n          <span class=\"img_text\">${likes}</span>\n        </li>\n        <li class=\"img_item\">\n          <h3 class=\"img_title\">Views</h3>\n          <span class=\"img_text\">${views}</span>\n        </li>\n        <li class=\"img_item\">\n          <h3 class=\"img_title\">comments</h3>\n          <span class=\"img_text\">${comments}</span>\n        </li>\n        <li class=\"img_item\">\n          <h3 class=\"img_title\">downloads</h3>\n          <span class=\"img_text\">${downloads}</span>\n        </li>\n      </ul>\n        </div>`\n    }, '');\n    divEl.insertAdjacentHTML('beforeend', markup);\n}\n","import axios from \"axios\"\n\nconst API_KEY = '43780591-6ab37bb22e1af39025cb54e89';\naxios.defaults.baseURL = 'https://pixabay.com/api/'\nexport const PER_PAGE = 15;\n\nexport function fetchPhoto(valuePhoto , newPage) {\n    const searchParams = {\n        per_page: PER_PAGE,\n        page: newPage,\n        key: API_KEY,\n        q: valuePhoto,\n        safesearch: true,\n        image_type: 'photo',\n        orientation: 'horizontal',\n    }\n    return axios.get(\"\", { params: searchParams }).then(response => {\n        return response.data;\n    })\n}\n","import axios from \"axios\"\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { renderPhoto , divEl} from   \"./js/render-function\";\nimport { fetchPhoto , PER_PAGE } from \"./js/pixabay-api\";\n\n\nconst formEl = document.querySelector('.search-form');\nconst inputEl = formEl.querySelector('input');\nconst loaderEl = document.querySelector('.loader');\nconst loaderMoreEl = document.querySelector(\".button-loader\");\nlet valueInput = \"\";\nlet ceurentPage = 0;\nlet totalPages = 0;\n\nformEl.addEventListener('submit', async (evn) => {\n    evn.preventDefault();\n    divEl.innerHTML = \"\";\n    loaderEl.classList.remove(\"is-hidden\");\n    loaderMoreEl.classList.add(\"is-hidden\");\n    valueInput = inputEl.value.trim();\n    ceurentPage = 1;\n    try {\n        const data = await fetchPhoto(valueInput , ceurentPage);\n        if (data.total === 0 || valueInput === \"\") {\n            throw new Error(\"Sorry, there are no images matching your search query. Please try again!\")\n        }\n        renderPhoto(data);\n        const lightbox = new SimpleLightbox('.container-img a');\n        lightbox.refresh();\n        \n        totalPages = Math.ceil(data.total / PER_PAGE);\n        if (totalPages > 1) {\n            loaderMoreEl.classList.remove('is-hidden');\n            \n        } else {\n            iziToast.show({ title: \"We're sorry, but you've reached the end of search results.\", position: 'topRight' });\n        }\n    } catch(error) {\n        iziToast.show({ title: error.message, position: 'topRight', backgroundColor: 'red' }); \n    }\n\n    formEl.reset();    \n    loaderEl.classList.add(\"is-hidden\");\n});\nconst smoothScrollOnLoadMore = () => {\n    const lastElementRender = document.querySelector('.container-img:last-child');\n    const rect = lastElementRender.getBoundingClientRect().height;\n    const scrollHeight = rect * 2;\n    window.scrollBy({\n        top: scrollHeight ,\n        left: 100,\n        behavior: \"smooth\",\n    });\n\n}\nloaderMoreEl.addEventListener('click', async function onLoadMorePressed() {\n    try {\n        ceurentPage += 1;\n        const data = await fetchPhoto(valueInput , ceurentPage);\n        renderPhoto(data);\n        const lightbox = new SimpleLightbox('.container-img a');\n        lightbox.refresh();\n        \n\n        smoothScrollOnLoadMore();\n\n        if (ceurentPage >= totalPages) {\n            loaderMoreEl.classList.add('is-hidden');\n            loaderMoreEl.removeEventListener('click', onLoadMorePressed);\n            iziToast.show({ title: \"We're sorry, but you've reached the end of search results.\", position: 'topRight' });\n    }\n    } catch(error) {\n        \n    }\n    \n});"],"names":["divEl","renderPhoto","arrayHits","markup","value","hit","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","axios","PER_PAGE","fetchPhoto","valuePhoto","newPage","searchParams","response","formEl","inputEl","loaderEl","loaderMoreEl","valueInput","ceurentPage","totalPages","evn","data","SimpleLightbox","iziToast","error","smoothScrollOnLoadMore","scrollHeight","onLoadMorePressed"],"mappings":"owBAAO,MAAMA,EAAQ,SAAS,cAAc,iBAAiB,EACrD,SAASC,EAAYC,EAAW,CAEpC,MAAMC,EAASD,EAAU,KAAK,OAAO,CAACE,EAAOC,IAAQ,CACjD,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,OAAOD,GAAS;AAAA,iBACPG,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,mCAIpCC,CAAK;AAAA;AAAA;AAAA;AAAA,mCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,mCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,mCAIRC,CAAS;AAAA;AAAA;AAAA,eAIvC,EAAE,EAAE,EACLZ,EAAM,mBAAmB,YAAaG,CAAM,CAChD,CC1BA,MAAMU,EAAU,qCAChBC,EAAM,SAAS,QAAU,2BAClB,MAAMC,EAAW,GAEjB,SAASC,EAAWC,EAAaC,EAAS,CAC7C,MAAMC,EAAe,CACjB,SAAUJ,EACV,KAAMG,EACN,IAAKL,EACL,EAAGI,EACH,WAAY,GACZ,WAAY,QACZ,YAAa,YAChB,EACD,OAAOH,EAAM,IAAI,GAAI,CAAE,OAAQK,CAAc,CAAA,EAAE,KAAKC,GACzCA,EAAS,IACnB,CACL,CCVA,MAAMC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAUD,EAAO,cAAc,OAAO,EACtCE,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAe,SAAS,cAAc,gBAAgB,EAC5D,IAAIC,EAAa,GACbC,EAAc,EACdC,EAAa,EAEjBN,EAAO,iBAAiB,SAAU,MAAOO,GAAQ,CAC7CA,EAAI,eAAc,EAClB5B,EAAM,UAAY,GAClBuB,EAAS,UAAU,OAAO,WAAW,EACrCC,EAAa,UAAU,IAAI,WAAW,EACtCC,EAAaH,EAAQ,MAAM,OAC3BI,EAAc,EACd,GAAI,CACA,MAAMG,EAAO,MAAMb,EAAWS,EAAaC,CAAW,EACtD,GAAIG,EAAK,QAAU,GAAKJ,IAAe,GACnC,MAAM,IAAI,MAAM,0EAA0E,EAE9FxB,EAAY4B,CAAI,EACC,IAAIC,EAAe,kBAAkB,EAC7C,QAAO,EAEhBH,EAAa,KAAK,KAAKE,EAAK,MAAQd,CAAQ,EACxCY,EAAa,EACbH,EAAa,UAAU,OAAO,WAAW,EAGzCO,EAAS,KAAK,CAAE,MAAO,6DAA8D,SAAU,UAAU,CAAE,CAElH,OAAOC,EAAO,CACXD,EAAS,KAAK,CAAE,MAAOC,EAAM,QAAS,SAAU,WAAY,gBAAiB,KAAK,CAAE,CACvF,CAEDX,EAAO,MAAK,EACZE,EAAS,UAAU,IAAI,WAAW,CACtC,CAAC,EACD,MAAMU,EAAyB,IAAM,CAGjC,MAAMC,EAFoB,SAAS,cAAc,2BAA2B,EAC7C,sBAAqB,EAAG,OAC3B,EAC5B,OAAO,SAAS,CACZ,IAAKA,EACL,KAAM,IACN,SAAU,QAClB,CAAK,CAEL,EACAV,EAAa,iBAAiB,QAAS,eAAeW,GAAoB,CACtE,GAAI,CACAT,GAAe,EACf,MAAMG,EAAO,MAAMb,EAAWS,EAAaC,CAAW,EACtDzB,EAAY4B,CAAI,EACC,IAAIC,EAAe,kBAAkB,EAC7C,QAAO,EAGhBG,IAEIP,GAAeC,IACfH,EAAa,UAAU,IAAI,WAAW,EACtCA,EAAa,oBAAoB,QAASW,CAAiB,EAC3DJ,EAAS,KAAK,CAAE,MAAO,6DAA8D,SAAU,UAAU,CAAE,EAElH,MAAc,CAEd,CAEL,CAAC"}